<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Fullpage Scroll with Pager</title>
  <style>
    /* ê¸°ë³¸ ì´ˆê¸°í™” */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box; /* íŒ¨ë”©, í…Œë‘ë¦¬ í¬í•¨í•œ ë„ˆë¹„/ë†’ì´ ê³„ì‚° */
    }
    html, body {
      scroll-behavior: smooth; /* ë¸Œë¼ìš°ì € ê¸°ë³¸ ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤ */
      font-family: sans-serif;
      overflow: hidden; /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¹€, íœ  ì´ë²¤íŠ¸ë¡œ ìŠ¤í¬ë¡¤ ì œì–´ */
    }
    /* í—¤ë” ìŠ¤íƒ€ì¼ */
    .header {
      position: fixed; /* í•­ìƒ ìƒë‹¨ ê³ ì • */
      top: 0; left: 0;
      width: 100%; /* í™”ë©´ ë„ˆë¹„ ê½‰ ì±„ì›€ */
      height: 60px;
      background: #333; /* ì§„í•œ íšŒìƒ‰ ë°°ê²½ */
      color: #fff; /* ê¸€ì í°ìƒ‰ */
      display: flex;
      align-items: center; /* ìˆ˜ì§ ì¤‘ì•™ ì •ë ¬ */
      justify-content: space-between; /* ì¢Œìš° ë ì •ë ¬ */
      padding: 0 30px; /* ì¢Œìš° ì—¬ë°± */
      z-index: 1000; /* ë‹¤ë¥¸ ìš”ì†Œ ìœ„ì— í‘œì‹œ */
    }
    /* í—¤ë” ë‚´ ë¡œê³  ìŠ¤íƒ€ì¼ */
    .logo {
      font-weight: bold;
      font-size: 20px;
    }
    /* ë©”ë‰´ ìŠ¤íƒ€ì¼: ê°€ë¡œ ì •ë ¬, ê°„ê²© 20px */
    .menu {
      display: flex;
      gap: 20px;
    }
    /* ë©”ë‰´ ë§í¬ ìŠ¤íƒ€ì¼ */
    .menu a {
      color: white;
      text-decoration: none;
      font-size: 16px;
      cursor: pointer;
    }
    /* ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì‹œ ë°‘ì¤„ */
    .menu a:hover {
      text-decoration: underline;
    }
    /* ê° ì„¹ì…˜ ê³µí†µ ìŠ¤íƒ€ì¼ */
    .section {
      width: 100%;
      height: 100vh; /* ë·°í¬íŠ¸ ë†’ì´ë§Œí¼ */
      padding-top: 60px; /* í—¤ë” ë†’ì´ë§Œí¼ íŒ¨ë”©(í—¤ë”ì™€ ê²¹ì¹˜ì§€ ì•Šë„ë¡) */
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
    }
    /* ê° ì„¹ì…˜ ë°°ê²½ìƒ‰ ë‹¤ë¥´ê²Œ */
    .section:nth-child(2) { background: #ff9a9e; }
    .section:nth-child(3) { background: #a1c4fd; }
    .section:nth-child(4) { background: #fbc2eb; }
    .section:nth-child(5) { background: #d4fc79; }
    /* í‘¸í„° ìŠ¤íƒ€ì¼ */
    .footer {
      height: 300px;
      background: #222; /* ì§™ì€ ë°°ê²½ */
      color: white;
      font-size: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    /* ì˜¤ë¥¸ìª½ ì¤‘ê°„ ì„¸ë¡œ í˜ì´ì € ì»¨í…Œì´ë„ˆ */
    .pager {
      position: fixed;
      top: 50%; /* ì„¸ë¡œ í™”ë©´ ì¤‘ì•™ */
      right: 20px; /* ì˜¤ë¥¸ìª½ì—ì„œ 20px ë–¨ì–´ì§ */
      transform: translateY(-50%); /* ì •í™•íˆ ì¤‘ì•™ ì •ë ¬ */
      display: flex;
      flex-direction: column; /* ì„¸ë¡œ ë°©í–¥ ì •ë ¬ */
      gap: 15px; /* ë²„íŠ¼ ê°„ ê°„ê²© */
      z-index: 1100; /* í—¤ë”ë³´ë‹¤ ìœ„ */
    }
    /* í˜ì´ì € ë²„íŠ¼ ê³µí†µ ìŠ¤íƒ€ì¼ */
    .pager button {
      width: 14px;
      height: 14px;
      border-radius: 50%; /* ë™ê·¸ë¼ë¯¸ */
      border: none;
      background: rgba(255,255,255,0.5); /* ë°˜íˆ¬ëª… í°ìƒ‰ */
      cursor: pointer;
      transition: background 0.3s; /* ë¶€ë“œëŸ¬ìš´ ìƒ‰ìƒ ë³€í™” */
    }
    /* í™œì„±í™” ë° í˜¸ë²„ ì‹œ ìƒ‰ìƒ, ê·¸ë¦¼ì ê°•ì¡° */
    .pager button.active,
    .pager button:hover {
      background: #fff;
      box-shadow: 0 0 6px 2px rgba(255,255,255,0.8);
    }
  </style>
  <!-- jQuery ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¶ˆëŸ¬ì˜¤ê¸° -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>
<body>
  <!-- ìƒë‹¨ ê³ ì • í—¤ë” -->
  <div class="header">
    <div class="logo">ğŸš€ MyLogo</div>
    <div class="menu">
      <a data-index="0">1ë²ˆ</a>
      <a data-index="1">2ë²ˆ</a>
      <a data-index="2">3ë²ˆ</a>
      <a data-index="3">4ë²ˆ</a>
      <a data-index="4">í‘¸í„°</a>
    </div>
  </div>

  <!-- ì„¹ì…˜ 4ê°œ -->
  <div class="section">1ë²ˆ í™”ë©´</div>
  <div class="section">2ë²ˆ í™”ë©´</div>
  <div class="section">3ë²ˆ í™”ë©´</div>
  <div class="section">4ë²ˆ í™”ë©´</div>

  <!-- í•˜ë‹¨ í‘¸í„° -->
  <div class="footer">ğŸ”š í‘¸í„° ì˜ì—­ (300px)</div>

  <!-- ì˜¤ë¥¸ìª½ ì¤‘ê°„ í˜ì´ì € ë²„íŠ¼ ì»¨í…Œì´ë„ˆ -->
  <div class="pager"></div>

  <script>
    $(function () {
      // í˜„ì¬ ë³´ê³  ìˆëŠ” ì„¹ì…˜ ì¸ë±ìŠ¤
      let current = 0;

      // ìŠ¤í¬ë¡¤ ëŒ€ìƒ: 4ê°œ ì„¹ì…˜ + 1ê°œ í‘¸í„° = ì´ 5ê°œ
      const $targets = $(".section, .footer");
      const total = $targets.length;

      // í—¤ë” ë†’ì´ (ìŠ¤í¬ë¡¤ ì‹œ ë¹¼ì¤˜ì•¼ í•¨)
      const headerHeight = $(".header").outerHeight();

      // ë§ˆì§€ë§‰ íœ  ì´ë²¤íŠ¸ ì‹œê°„ ì €ì¥ (throttle ìš©)
      let lastTime = 0;
      // íœ  ì´ë²¤íŠ¸ ì²˜ë¦¬ ìµœì†Œ ì‹œê°„ ê°„ê²©(ms)
      const throttleDelay = 500;

      // í˜ì´ì € ë²„íŠ¼ì„ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ë¶€ë¶„
      const $pager = $(".pager");
      for(let i=0; i < total; i++) {
        // ë²„íŠ¼ ìš”ì†Œ ìƒì„± í›„ data-index ë¶€ì—¬
        const $btn = $("<button>").attr("data-index", i);
        // ì²« ë²ˆì§¸ ë²„íŠ¼ì€ í™œì„±í™” ìƒíƒœë¡œ ì‹œì‘
        if(i === 0) $btn.addClass("active");
        $pager.append($btn);
      }

      // í˜ì´ì € í™œì„±í™” ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” í•¨ìˆ˜
      function updatePager(index) {
        // ëª¨ë“  ë²„íŠ¼ì—ì„œ active ì œê±°
        $pager.find("button").removeClass("active");
        // í˜„ì¬ ì¸ë±ìŠ¤ ë²„íŠ¼ì—ë§Œ active ì¶”ê°€
        $pager.find(`button[data-index=${index}]`).addClass("active");
      }

      // ì‹¤ì œ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ì´ë™ í•¨ìˆ˜
      function scrollToTarget(index) {
        // íƒ€ê²Ÿ ìš”ì†Œì˜ ë¬¸ì„œ ë‚´ ìœ„ì¹˜(ìƒë‹¨), í—¤ë” ë†’ì´ë§Œí¼ ë¹¼ì„œ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ê³„ì‚°
        const targetTop = $targets.eq(index).offset().top - headerHeight;
        // ì¦‰ì‹œ ìŠ¤í¬ë¡¤ ì´ë™ (animate ëŒ€ì‹  scrollTop)
        $("html, body").stop().scrollTop(targetTop);
        // í˜ì´ì € ìƒíƒœ ê°±ì‹ 
        updatePager(index);
      }

      // ë§ˆìš°ìŠ¤ íœ  ì´ë²¤íŠ¸: throttle ì ìš©í•´ 500ms ë‚´ ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€
      $(window).on("wheel", function (e) {
        const now = Date.now();
        if (now - lastTime < throttleDelay) return;  // ì¼ì • ì‹œê°„ ì•ˆì— ì¬ì‹¤í–‰ ë°©ì§€
        lastTime = now;

        const delta = e.originalEvent.deltaY;
        // íœ  ë°©í–¥ì— ë”°ë¼ current ì¸ë±ìŠ¤ ì¦ê° (í•œ ë‹¨ê³„ì”©ë§Œ)
        if (delta > 0 && current < total - 1) {
          current++;
        } else if (delta < 0 && current > 0) {
          current--;
        }
        // ìŠ¤í¬ë¡¤ ì´ë™ í•¨ìˆ˜ í˜¸ì¶œ
        scrollToTarget(current);
      });

      // í—¤ë” ë©”ë‰´ í´ë¦­ ì‹œ í•´ë‹¹ ì„¹ì…˜ìœ¼ë¡œ ì´ë™
      $(".menu a").on("click", function () {
        current = parseInt($(this).data("index"));
        scrollToTarget(current);
      });

      // í˜ì´ì € ë²„íŠ¼ í´ë¦­ ì‹œ í•´ë‹¹ ì„¹ì…˜ìœ¼ë¡œ ì´ë™
      $pager.on("click", "button", function () {
        current = parseInt($(this).attr("data-index"));
        scrollToTarget(current);
      });
    });
  </script>
</body>
</html>
